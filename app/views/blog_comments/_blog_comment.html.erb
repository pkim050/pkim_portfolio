<% unless blog_comment&.parent_id || !blog_comment&.persisted? %>
  <div class="container rounded overflow-hidden shadow-lg">
    <div class="px-6 py-4">
      <strong><%= blog_comment.user.username %></strong> Â· <%= distance_of_time_in_words_to_now(blog_comment.created_at) %> ago
      <%= simple_format blog_comment.body, id: "comment-#{blog_comment.id}" %>
      </br>
      <%= link_to 'Reply', new_blog_post_blog_comment_path(@blog_post, parent_id: blog_comment.id), data: { turbo_stream: "reply-#{blog_comment.id}" } %>
      <% if can? :edit, blog_comment %>
        <%= link_to 'Edit', edit_blog_post_blog_comment_path(@blog_post, id: blog_comment.id), data: { turbo_stream: "reply-#{blog_comment.id}" } %>
      <% end %>
      <% if can? :destroy, blog_comment %>
        <%= link_to 'Delete', blog_post_blog_comment_path(@blog_post, id: blog_comment.id), data: { turbo_stream: "reply-#{blog_comment.id}", turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete your comment?' } %>
      <% end %>
    </div>
  </div>
  <div id="replies-<%= blog_comment.id %>" class="ml-12">
    <% if blog_comment.replies.any? %>
      <% blog_comment.replies.order('created_at desc').each do |reply| %> 
        <%= render partial: 'blog_comments/reply', locals: { reply: reply } %>
      <% end %>
    <% end %>
  </div>
<% end %>
